{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Documents\\\\lostnfound_fullstack\\\\frontend\\\\src\\\\pages\\\\public\\\\LoginPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { useAuth } from '../../context/AuthContext'; // Crucial for calling login()\nimport './LoginPage.css'; // Import the dedicated CSS file\nimport UserIcon from '../../assets/user.png'; // Assuming you save the image here\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LoginPage = () => {\n  _s();\n  // State to manage form inputs\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [showPassword, setShowPassword] = useState(false);\n  const [error, setError] = useState('');\n\n  // Get login function and loading state from context\n  const {\n    login,\n    isLoading,\n    user\n  } = useAuth();\n  const navigate = useNavigate();\n\n  // Function to handle form submission and authentication\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setError('');\n    if (!email || !password) {\n      setError('Please enter both email and password.');\n      return;\n    }\n\n    // Call the login function from AuthContext (which will handle the backend/simulation check)\n    // If login returns true (success), navigate. If it returns a string, it's an error message.\n    const result = await login(email, password);\n    if (result === true) {\n      // ðŸ›‘ NEW REDIRECT LOGIC: Check the role from the context\n      const userRole = user.role; // Assuming user is available in context after login\n\n      if (userRole === 'admin') {\n        navigate('/admin', {\n          replace: true\n        });\n      } else {\n        navigate('/posts', {\n          replace: true\n        });\n      }\n    } else {\n      // FAILURE: result contains the error message string\n      setError(result);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"login-page-wrapper\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login-form-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-logo-container\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: UserIcon,\n          alt: \"User Icon\",\n          className: \"user-logo-image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"login-header\",\n        children: \"Login Portal\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"login-error\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 27\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"login-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"email\",\n          className: \"login-label\",\n          children: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          id: \"email\",\n          className: \"login-input\",\n          placeholder: \"Your university or personal email\",\n          value: email,\n          onChange: e => setEmail(e.target.value),\n          required: true,\n          disabled: isLoading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"password\",\n          className: \"login-label\",\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: showPassword ? 'text' : 'password',\n          id: \"password\",\n          className: \"login-input\",\n          placeholder: \"Password\",\n          value: password,\n          onChange: e => setPassword(e.target.value),\n          required: true,\n          disabled: isLoading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"password-toggle\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            id: \"showPassword\",\n            checked: showPassword,\n            onChange: () => setShowPassword(!showPassword),\n            disabled: isLoading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"showPassword\",\n            children: \"Show Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"login-button\",\n          disabled: isLoading,\n          children: isLoading ? 'Verifying...' : 'Log In'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bottom-links-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"signup-link-text\",\n          children: [\"Not yet have an account? \", /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/signup\",\n            className: \"link-style\",\n            children: \"Sign Up\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 50\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/forgot-password\",\n          className: \"link-style forgot-password-link\",\n          children: \"Forgot Password?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 9\n  }, this);\n};\n_s(LoginPage, \"25Nai3T7+el/dFrD6JRJuwo1XHY=\", false, function () {\n  return [useAuth, useNavigate];\n});\n_c = LoginPage;\nexport default LoginPage;\nvar _c;\n$RefreshReg$(_c, \"LoginPage\");","map":{"version":3,"names":["React","useState","useNavigate","Link","useAuth","UserIcon","jsxDEV","_jsxDEV","LoginPage","_s","email","setEmail","password","setPassword","showPassword","setShowPassword","error","setError","login","isLoading","user","navigate","handleSubmit","e","preventDefault","result","userRole","role","replace","className","children","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","htmlFor","type","id","placeholder","value","onChange","target","required","disabled","checked","to","_c","$RefreshReg$"],"sources":["C:/Users/User/Documents/lostnfound_fullstack/frontend/src/pages/public/LoginPage.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\nimport { useAuth } from '../../context/AuthContext'; // Crucial for calling login()\r\nimport './LoginPage.css'; // Import the dedicated CSS file\r\nimport UserIcon from '../../assets/user.png'; // Assuming you save the image here\r\n\r\nconst LoginPage = () => {\r\n    // State to manage form inputs\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [showPassword, setShowPassword] = useState(false);\r\n    const [error, setError] = useState('');\r\n\r\n    // Get login function and loading state from context\r\n    const { login, isLoading, user} = useAuth();\r\n    const navigate = useNavigate();\r\n\r\n    // Function to handle form submission and authentication\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setError('');\r\n        \r\n        if (!email || !password) {\r\n            setError('Please enter both email and password.');\r\n            return;\r\n        }\r\n\r\n        // Call the login function from AuthContext (which will handle the backend/simulation check)\r\n        // If login returns true (success), navigate. If it returns a string, it's an error message.\r\n        const result = await login(email, password); \r\n        \r\n        if (result === true) {\r\n             // ðŸ›‘ NEW REDIRECT LOGIC: Check the role from the context\r\n            const userRole = user.role; // Assuming user is available in context after login\r\n        \r\n            if (userRole === 'admin') {\r\n                navigate('/admin', { replace: true });\r\n            } else {\r\n                navigate('/posts', { replace: true });\r\n            }\r\n        } else {\r\n            // FAILURE: result contains the error message string\r\n            setError(result);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"login-page-wrapper\">\r\n            <div className=\"login-form-container\">\r\n                \r\n                {/* 1. User Icon Logo */}\r\n                <div className=\"user-logo-container\">\r\n                    <img src={UserIcon} \r\n                         alt=\"User Icon\" \r\n                         className=\"user-logo-image\" />\r\n                </div>\r\n                \r\n                {/* 2. Header Text */}\r\n                <h1 className=\"login-header\">Login Portal</h1>\r\n                \r\n                {/* 3. Error Message Display */}\r\n                {error && <p className=\"login-error\">{error}</p>}\r\n\r\n                <form onSubmit={handleSubmit} className=\"login-form\">\r\n                    \r\n                    {/* Email Field */}\r\n                    <label htmlFor=\"email\" className=\"login-label\">Email</label>\r\n                    <input \r\n                        type=\"email\" \r\n                        id=\"email\" \r\n                        className=\"login-input\"\r\n                        placeholder=\"Your university or personal email\"\r\n                        value={email}\r\n                        onChange={(e) => setEmail(e.target.value)}\r\n                        required\r\n                        disabled={isLoading}\r\n                    />\r\n                    \r\n                    {/* Password Field */}\r\n                    <label htmlFor=\"password\" className=\"login-label\">Password</label>\r\n                    <input \r\n                        type={showPassword ? 'text' : 'password'} \r\n                        id=\"password\" \r\n                        className=\"login-input\"\r\n                        placeholder=\"Password\"\r\n                        value={password}\r\n                        onChange={(e) => setPassword(e.target.value)}\r\n                        required\r\n                        disabled={isLoading}\r\n                    />\r\n                    \r\n                    {/* Show Password Checkbox */}\r\n                    <div className=\"password-toggle\">\r\n                        <input \r\n                            type=\"checkbox\" \r\n                            id=\"showPassword\"\r\n                            checked={showPassword}\r\n                            onChange={() => setShowPassword(!showPassword)}\r\n                            disabled={isLoading}\r\n                        />\r\n                        <label htmlFor=\"showPassword\">Show Password</label>\r\n                    </div>\r\n\r\n                    {/* Log In Button */}\r\n                    <button \r\n                        type=\"submit\" \r\n                        className=\"login-button\"\r\n                        disabled={isLoading}\r\n                    >\r\n                        {isLoading ? 'Verifying...' : 'Log In'}\r\n                    </button>\r\n                </form>\r\n\r\n                {/* 4. Bottom Links Section */}\r\n                <div className=\"bottom-links-container\">\r\n                    {/* Left: Sign Up Link */}\r\n                    <p className=\"signup-link-text\">\r\n                        Not yet have an account? <Link to=\"/signup\" className=\"link-style\">Sign Up</Link>\r\n                    </p>\r\n                    \r\n                    {/* Right: Forgot Password Link */}\r\n                    <Link to=\"/forgot-password\" className=\"link-style forgot-password-link\">\r\n                        Forgot Password?\r\n                    </Link>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LoginPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}