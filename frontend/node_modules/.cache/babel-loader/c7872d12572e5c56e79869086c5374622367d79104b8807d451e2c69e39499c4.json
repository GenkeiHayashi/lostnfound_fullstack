{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Documents\\\\lostnfound_fullstack\\\\frontend\\\\src\\\\pages\\\\admin\\\\AdminDashboard.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../../context/AuthContext';\nimport './AdminDashboard.css';\nimport AdminItemModal from '../../components/items/AdminItemModal'; // New Modal Component\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DashboardHeader = () => {\n  _s();\n  // ðŸ›‘ BACKEND PLACEHOLDER: Uncomment the context hook\n  const {\n    user,\n    logout\n  } = useAuth();\n  const navigate = useNavigate();\n  const username = (user === null || user === void 0 ? void 0 : user.displayName) || (user === null || user === void 0 ? void 0 : user.email.split('@')[0]) || \"Admin\";\n  const handleLogout = () => {\n    logout();\n    navigate('/login', {\n      replace: true\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"header\", {\n    className: \"admin-header\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header-left\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: \"/admin\",\n        className: \"admin-logo-link\",\n        children: \"LostHub\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n        className: \"header-nav\",\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/admin/usermanage\",\n          className: \"nav-link\",\n          children: \"User Management\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header-right\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"welcome-message\",\n        children: [\"Welcome , \", /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 31\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleLogout,\n        className: \"logout-button\",\n        children: \"Log Out\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 21,\n    columnNumber: 9\n  }, this);\n};\n\n// --- UTILITIES & MOCK DATA (Same as AllPosts) ---\n_s(DashboardHeader, \"owExUWFylk0vVlQUKU4QcBpCg7Y=\", false, function () {\n  return [useAuth, useNavigate];\n});\n_c = DashboardHeader;\nconst CATEGORIES = ['Electronics', 'Stationery', 'Books', 'Clothing', 'Personal Items', 'Others'];\n// ðŸ›‘ BACKEND PLACEHOLDER: API URLS\nconst ITEMS_API_URL = 'https://losthub-backend.vercel.app/api/items';\nconst APPROVE_API_URL = 'https://losthub-backend.vercel.app/api/admin/approve-item';\nconst DELETE_API_URL = 'https://losthub-backend.vercel.app/api/admin/items';\n\n// Utility function to format timestamp from Firestore\nconst formatTimestamp = timestamp => {\n  // 1. Handle null, undefined, or N/A\n  if (!timestamp) {\n    return 'N/A';\n  }\n  let dateObject;\n  // Check for SERIALIZED Firebase Timestamp (Most common for API response)\n  if (typeof timestamp === 'object' && timestamp._seconds) {\n    // Data is a plain JSON object like { _seconds: X, _nanoseconds: Y }\n    // Manually convert the seconds property to milliseconds for the Date constructor\n    dateObject = new Date(timestamp._seconds * 1000);\n  }\n  // If conversion was successful, format the date\n  else {\n    // If none of the above, return N/A\n    return 'N/A';\n  }\n  // Return the formatted date string\n  return dateObject.toLocaleDateString('en-US', {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric'\n  });\n};\nconst AdminDashboard = () => {\n  _s2();\n  // State for filtering\n  const [statusFilter, setStatusFilter] = useState('lost'); // Default: Lost\n  const [categoryFilter, setCategoryFilter] = useState(''); // Default: All\n  const [approvalFilter, setApprovalFilter] = useState('pending'); // ðŸ›‘ NEW: Default to Pending\n  const [items, setItems] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [selectedItem, setSelectedItem] = useState(null);\n  const [refreshTrigger, setRefreshTrigger] = useState(0);\n\n  // ðŸ›‘ BACKEND PLACEHOLDER: Auth context\n  const {\n    token\n  } = useAuth();\n  const fetchItems = async () => {\n    setIsLoading(true);\n    // Ensure token is available for the API call\n    if (!token) {\n      console.error(\"Token missing. Cannot fetch items securely.\");\n      setItems([]);\n      setIsLoading(false);\n      return;\n    }\n    try {\n      // ðŸ›‘ API CALL 1: Fetch filtered items\n      // NOTE: The current backend /api/items filters only by status and category.\n      // We fetch all and perform the isApproved filter on the frontend for now \n      // until the backend is updated to support isApproved query parameter.\n      const response = await axios.get(ITEMS_API_URL, {\n        params: {\n          status: statusFilter,\n          category: categoryFilter || undefined,\n          approvalStatus: approvalFilter\n        },\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n\n      // The data received is assumed to be pre-filtered by the backend\n      setItems(response.data);\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error(\"Admin fetch failed:\", ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || error.message);\n      // On API failure, simply clear items and display the error message\n      setItems([]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  useEffect(() => {\n    fetchItems();\n  }, [statusFilter, categoryFilter, approvalFilter, token, refreshTrigger]); // Dependencies are correct\n\n  // ðŸ›‘ ACTION HANDLERS (Approve/Reject/Delete) - INTEGRATED WITH BACKEND\n  const handleAction = async (itemId, actionType) => {\n    if (!token) {\n      console.error(\"Error: Not authenticated. Cannot perform action.\");\n      return;\n    }\n    let endpoint = '';\n    let method = '';\n    let successMessage = '';\n    try {\n      if (actionType === 'approve') {\n        // Calls POST /api/admin/approve-item/:itemId\n        endpoint = `${APPROVE_API_URL}/${itemId}`;\n        method = 'POST';\n        successMessage = 'Approved successfully! Post is now visible.';\n      } else if (actionType === 'reject' || actionType === 'delete') {\n        // Reject (Pending) and Delete (Approved) both call DELETE /api/admin/items/:itemId\n        endpoint = `${DELETE_API_URL}/${itemId}`;\n        method = 'DELETE';\n        successMessage = 'Post deleted permanently!';\n      } else {\n        return;\n      }\n\n      // ðŸ›‘ API CALL 2/3: Execute the action\n      const response = await axios({\n        method: method,\n        url: endpoint,\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n\n      // After successful action, close modal, and refresh data\n      setSelectedItem(null);\n      console.log(successMessage);\n      setRefreshTrigger(prev => prev + 1);\n    } catch (error) {\n      var _error$response2, _error$response3, _error$response3$data;\n      console.error(`Action ${actionType} failed:`, ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data) || error.message);\n      console.error(`Action failed: ${((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.message) || 'Server error.'}`);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-dashboard-page\",\n    children: [/*#__PURE__*/_jsxDEV(DashboardHeader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"admin-main-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-control-bar\",\n        children: [/*#__PURE__*/_jsxDEV(\"select\", {\n          value: categoryFilter,\n          onChange: e => setCategoryFilter(e.target.value),\n          className: \"admin-dropdown category-dropdown\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"All Categories\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 25\n          }, this), CATEGORIES.map(cat => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: cat,\n            children: cat\n          }, cat, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 48\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: approvalFilter,\n          onChange: e => setApprovalFilter(e.target.value),\n          className: \"admin-dropdown approval-dropdown\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"pending\",\n            children: \"Pending Approval\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"approved\",\n            children: \"Approved\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"status-toggle-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setStatusFilter('lost'),\n            className: `status-button ${statusFilter === 'lost' ? 'active-status' : ''}`,\n            children: \"Lost Item\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setStatusFilter('found'),\n            className: `status-button ${statusFilter === 'found' ? 'active-status' : ''}`,\n            children: \"Found Item\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 17\n      }, this), isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-state\",\n        children: \"Loading Items...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"item-grid-container\",\n        children: items.length > 0 ? items.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"item-card\",\n          onClick: () => setSelectedItem(item),\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: item.imageUrl,\n            alt: item.name,\n            className: \"item-photo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 37\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"item-info\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: item.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Status: \", item.isApproved ? 'Approved' : 'Pending']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Reported: \", formatTimestamp(item.dateReported)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 41\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 37\n          }, this)]\n        }, item.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 33\n        }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"no-items-message\",\n          children: [\"No \", approvalFilter, \" \", statusFilter, \" items found.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(AdminItemModal, {\n      item: selectedItem,\n      onClose: () => setSelectedItem(null),\n      onAction: handleAction // Pass the handler down\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 185,\n    columnNumber: 9\n  }, this);\n};\n_s2(AdminDashboard, \"wRjDpvl86/g5buIQEFM9t4+L8Ro=\", false, function () {\n  return [useAuth];\n});\n_c2 = AdminDashboard;\nexport default AdminDashboard;\nvar _c, _c2;\n$RefreshReg$(_c, \"DashboardHeader\");\n$RefreshReg$(_c2, \"AdminDashboard\");","map":{"version":3,"names":["React","useState","useEffect","axios","Link","useNavigate","useAuth","AdminItemModal","jsxDEV","_jsxDEV","DashboardHeader","_s","user","logout","navigate","username","displayName","email","split","handleLogout","replace","className","children","to","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","CATEGORIES","ITEMS_API_URL","APPROVE_API_URL","DELETE_API_URL","formatTimestamp","timestamp","dateObject","_seconds","Date","toLocaleDateString","year","month","day","AdminDashboard","_s2","statusFilter","setStatusFilter","categoryFilter","setCategoryFilter","approvalFilter","setApprovalFilter","items","setItems","isLoading","setIsLoading","selectedItem","setSelectedItem","refreshTrigger","setRefreshTrigger","token","fetchItems","console","error","response","get","params","status","category","undefined","approvalStatus","headers","Authorization","data","_error$response","_error$response$data","message","handleAction","itemId","actionType","endpoint","method","successMessage","url","log","prev","_error$response2","_error$response3","_error$response3$data","value","onChange","e","target","map","cat","length","item","src","imageUrl","alt","name","isApproved","dateReported","id","onClose","onAction","_c2","$RefreshReg$"],"sources":["C:/Users/User/Documents/lostnfound_fullstack/frontend/src/pages/admin/AdminDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios'; \r\nimport { Link, useNavigate } from 'react-router-dom'; \r\nimport { useAuth } from '../../context/AuthContext';\r\nimport './AdminDashboard.css';\r\nimport AdminItemModal from '../../components/items/AdminItemModal'; // New Modal Component\r\n\r\nconst DashboardHeader = () => {\r\n    // ðŸ›‘ BACKEND PLACEHOLDER: Uncomment the context hook\r\n    const { user, logout } = useAuth();\r\n    const navigate = useNavigate();\r\n\r\n    const username = user?.displayName || user?.email.split('@')[0] || \"Admin\";  \r\n\r\n    const handleLogout = () => {\r\n        logout(); \r\n        navigate('/login', { replace: true }); \r\n    };\r\n\r\n    return (\r\n        <header className=\"admin-header\">\r\n            {/* Left Section: Logo and Navigation Links */}\r\n            <div className=\"header-left\">\r\n                \r\n                {/* Logo/Home Link (Routes to Admin Dashboard home) */}\r\n                <Link to=\"/admin\" className=\"admin-logo-link\">\r\n                    LostHub\r\n                </Link>\r\n                \r\n                {/* Admin Navigation Link */}\r\n                <nav className=\"header-nav\">\r\n                    <Link to=\"/admin/usermanage\" className=\"nav-link\">\r\n                        User Management\r\n                    </Link>\r\n                </nav>\r\n            </div>\r\n\r\n            {/* Right Section: Welcome Message and Logout Button */}\r\n            <div className=\"header-right\">\r\n                <span className=\"welcome-message\">\r\n                    Welcome , <strong>{username}</strong>\r\n                </span>\r\n                <button \r\n                    onClick={handleLogout} \r\n                    className=\"logout-button\"\r\n                >\r\n                    Log Out\r\n                </button>\r\n            </div>\r\n        </header>\r\n    );\r\n};\r\n\r\n// --- UTILITIES & MOCK DATA (Same as AllPosts) ---\r\nconst CATEGORIES = ['Electronics', 'Stationery', 'Books', 'Clothing', 'Personal Items', 'Others'];\r\n// ðŸ›‘ BACKEND PLACEHOLDER: API URLS\r\nconst ITEMS_API_URL = 'https://losthub-backend.vercel.app/api/items'; \r\nconst APPROVE_API_URL = 'https://losthub-backend.vercel.app/api/admin/approve-item'; \r\nconst DELETE_API_URL = 'https://losthub-backend.vercel.app/api/admin/items'; \r\n\r\n// Utility function to format timestamp from Firestore\r\nconst formatTimestamp = (timestamp) => {\r\n    // 1. Handle null, undefined, or N/A\r\n    if (!timestamp) {\r\n        return 'N/A';\r\n    }\r\n    let dateObject;\r\n    // Check for SERIALIZED Firebase Timestamp (Most common for API response)\r\n    if (typeof timestamp === 'object' && timestamp._seconds) {\r\n        // Data is a plain JSON object like { _seconds: X, _nanoseconds: Y }\r\n        // Manually convert the seconds property to milliseconds for the Date constructor\r\n        dateObject = new Date(timestamp._seconds * 1000); \r\n    }\r\n    // If conversion was successful, format the date\r\n    else {\r\n        // If none of the above, return N/A\r\n        return 'N/A';\r\n    }\r\n    // Return the formatted date string\r\n    return dateObject.toLocaleDateString('en-US', { \r\n        year: 'numeric', \r\n        month: 'short', \r\n        day: 'numeric' \r\n    });\r\n};\r\n\r\nconst AdminDashboard = () => {\r\n    // State for filtering\r\n    const [statusFilter, setStatusFilter] = useState('lost'); // Default: Lost\r\n    const [categoryFilter, setCategoryFilter] = useState(''); // Default: All\r\n    const [approvalFilter, setApprovalFilter] = useState('pending'); // ðŸ›‘ NEW: Default to Pending\r\n    const [items, setItems] = useState([]);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [selectedItem, setSelectedItem] = useState(null); \r\n    const [refreshTrigger, setRefreshTrigger] = useState(0);\r\n    \r\n    // ðŸ›‘ BACKEND PLACEHOLDER: Auth context\r\n    const { token } = useAuth();\r\n\r\n    const fetchItems = async () => {\r\n        setIsLoading(true);\r\n        // Ensure token is available for the API call\r\n        if (!token) {\r\n            console.error(\"Token missing. Cannot fetch items securely.\");\r\n            setItems([]);\r\n            setIsLoading(false);\r\n            return;\r\n        }\r\n\r\n    try {\r\n            // ðŸ›‘ API CALL 1: Fetch filtered items\r\n            // NOTE: The current backend /api/items filters only by status and category.\r\n            // We fetch all and perform the isApproved filter on the frontend for now \r\n            // until the backend is updated to support isApproved query parameter.\r\n            const response = await axios.get(ITEMS_API_URL, {\r\n                params: { \r\n                    status: statusFilter, \r\n                    category: categoryFilter || undefined, \r\n                    approvalStatus: approvalFilter\r\n                },\r\n                headers: { Authorization: `Bearer ${token}` }\r\n            });\r\n\r\n            // The data received is assumed to be pre-filtered by the backend\r\n            setItems(response.data); \r\n\r\n        } catch (error) {\r\n            console.error(\"Admin fetch failed:\", error.response?.data?.message || error.message);\r\n            // On API failure, simply clear items and display the error message\r\n            setItems([]);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchItems();\r\n    }, [statusFilter, categoryFilter, approvalFilter , token, refreshTrigger ]); // Dependencies are correct\r\n\r\n\r\n    // ðŸ›‘ ACTION HANDLERS (Approve/Reject/Delete) - INTEGRATED WITH BACKEND\r\n    const handleAction = async (itemId, actionType) => {\r\n        if (!token) {\r\n            console.error(\"Error: Not authenticated. Cannot perform action.\");\r\n            return;\r\n        }\r\n\r\n        let endpoint = '';\r\n        let method = '';\r\n        let successMessage = '';\r\n\r\n        try {\r\n            if (actionType === 'approve') {\r\n                // Calls POST /api/admin/approve-item/:itemId\r\n                endpoint = `${APPROVE_API_URL}/${itemId}`;\r\n                method = 'POST';\r\n                successMessage = 'Approved successfully! Post is now visible.';\r\n            } else if (actionType === 'reject' || actionType === 'delete') {\r\n                // Reject (Pending) and Delete (Approved) both call DELETE /api/admin/items/:itemId\r\n                endpoint = `${DELETE_API_URL}/${itemId}`;\r\n                method = 'DELETE';\r\n                successMessage = 'Post deleted permanently!';\r\n            } else {\r\n                return;\r\n            }\r\n\r\n            // ðŸ›‘ API CALL 2/3: Execute the action\r\n            const response = await axios({\r\n                method: method,\r\n                url: endpoint,\r\n                headers: { Authorization: `Bearer ${token}` }\r\n            });\r\n\r\n            // After successful action, close modal, and refresh data\r\n            setSelectedItem(null); \r\n            console.log(successMessage);\r\n            setRefreshTrigger(prev => prev + 1);          \r\n        } catch (error) {\r\n            console.error(`Action ${actionType} failed:`, error.response?.data || error.message);\r\n            console.error(`Action failed: ${error.response?.data?.message || 'Server error.'}`);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"admin-dashboard-page\">\r\n            <DashboardHeader /> \r\n            \r\n            <main className=\"admin-main-content\">\r\n                \r\n                {/* --- Control Bar: Filters --- */}\r\n                <div className=\"admin-control-bar\">\r\n                    \r\n                    {/* 1. Category Dropdown (Same size as when shrunk) */}\r\n                    <select \r\n                        value={categoryFilter} \r\n                        onChange={(e) => setCategoryFilter(e.target.value)} \r\n                        className=\"admin-dropdown category-dropdown\"\r\n                    >\r\n                        <option value=\"\">All Categories</option>\r\n                        {CATEGORIES.map(cat => <option key={cat} value={cat}>{cat}</option>)}\r\n                    </select>\r\n\r\n                    {/* 2. Approval Status Dropdown (Default Pending) */}\r\n                    <select \r\n                        value={approvalFilter} \r\n                        onChange={(e) => setApprovalFilter(e.target.value)} \r\n                        className=\"admin-dropdown approval-dropdown\"\r\n                    >\r\n                        <option value=\"pending\">Pending Approval</option>\r\n                        <option value=\"approved\">Approved</option>\r\n                    </select>\r\n\r\n                    {/* 3. Status Toggle Buttons (Lost/Found) */}\r\n                    <div className=\"status-toggle-group\">\r\n                        <button \r\n                            onClick={() => setStatusFilter('lost')}\r\n                            className={`status-button ${statusFilter === 'lost' ? 'active-status' : ''}`}\r\n                        >\r\n                            Lost Item\r\n                        </button>\r\n                        <button \r\n                            onClick={() => setStatusFilter('found')}\r\n                            className={`status-button ${statusFilter === 'found' ? 'active-status' : ''}`}\r\n                        >\r\n                            Found Item\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Item Grid */}\r\n                {isLoading ? (\r\n                    <div className=\"loading-state\">Loading Items...</div>\r\n                ) : (\r\n                    <div className=\"item-grid-container\">\r\n                        {items.length > 0 ? (\r\n                            items.map(item => (\r\n                                <div key={item.id} className=\"item-card\" onClick={() => setSelectedItem(item)}>\r\n                                    <img src={item.imageUrl} alt={item.name} className=\"item-photo\" />\r\n                                    <div className=\"item-info\">\r\n                                        <h3>{item.name}</h3>\r\n                                        <p>Status: {item.isApproved ? 'Approved' : 'Pending'}</p>\r\n                                        <p>Reported: {formatTimestamp(item.dateReported)}</p>\r\n                                    </div>\r\n                                </div>\r\n                            ))\r\n                        ) : (\r\n                            <p className=\"no-items-message\">No {approvalFilter} {statusFilter} items found.</p>\r\n                        )}\r\n                    </div>\r\n                )}\r\n            </main>\r\n\r\n            {/* Admin Action Modal */}\r\n            <AdminItemModal \r\n                item={selectedItem} \r\n                onClose={() =>\r\n                    setSelectedItem(null)}\r\n                onAction={handleAction} // Pass the handler down\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AdminDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}